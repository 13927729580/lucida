{% extends "base.html" %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/asr.css')}}">

<div class="container">
	<div class="row">
		<p style="color:gray">Main Â» Infer</p>
	</div>

	<div class="container">
		<div class="row">
			<p><h3>Ask a question:</h3></p>
		</div>
	</div>

	<div class="container">
		<form id="infer_form" method=post enctype=multipart/form-data>
			<input name="op" type="hidden" value="infer" />

			<div class="form-group">
				<label>Speech Text</label>
				<p class="help-block">Not satisfied with speech recognition? Use this!</p>
				<input id="speech_text" class="form-control" placeholder="What is the speed of light?">
			</div>

			<div class="form-group">
				<label>Image input</label>
				<input id="file_input" type="file" name="file">
				<p class="help-block">Upload your picture!</p>
				<img id="image_upload_preview" height="90" />
			</div>

			<div class="form-group">
				<input id="file_submit" type="submit" value="Infer" class="btn btn-info">
			</div>
		</form>
	</div>
</div>

<div class="blended_grid">
	<div class="containerResponse">
		<table style="width:800px" align="center">
			<tr>
				<td>
					<div id="recbutton" class="disabled" onclick="clearTranscription(); toggleListening();"></div>
				</td>
				<td><div class="wrap">
						<!-- <textarea readonly style="margin&#45;left: 4%;" id="trans" ></textarea> -->
						<textarea readonly id="trans" ></textarea>
					</div>
				</td>
				<td><div class="wrapr">
						<textarea readonly id="clinc" style="margin-right: 10px"></textarea>
					</div>
				</td>
			</tr>
			<tr>
				<td></td>
				<td>
					<img src="{{ url_for('static', filename='image/user.png')}}" style="float: left; width: 70px;">
				</td>
				<td>
				 	<img src="{{ url_for('static', filename='image/lucida.jpg')}}" style="float: right; width: 80px;">
				</td>
			</tr>
			<tr>
				<td></td>
				<td colspan="2">
				<br><br>
				<center>
					Powered by <a href="http://lucida.ai">Lucida</a>
				</center>
				</td>
			</tr>
			<tr>
				<td></td>
				<td>
					<br>
					<a href="http://lucida.ai">
					<img src="{{ url_for('static', filename='image/lucida.jpg')}}" style="float: right; width: 100px; margin-right: 65px">
					</a>
				</td>
				<td>
					<br>
					<a href="http://djinn.clarity-lab.org">
					<img src="{{ url_for('static', filename='image/djinn.png')}}" style="float: left; width: 100px; margin-left: 5px">
					</a>
				</td>

		  </tr>
		</table>

		{% if errors %}
		<strong class=text-danger><p class="error">{{ errors }}</p></strong>
		{% endif %}

		{% if result_pictures %}
		<h5>Results</h5>
		{% endif %}

		{% for i in result_pictures %}
		<div class="col-sm-4">
			<div>
				<img src="data:;base64,{{ i['data'] }}" style="max-width:none;" height="90"></img>
			</div>
			<div>
				<p>{{ i['label'] }}</p>
			</div>  
		</div>
		{% endfor %}
	</div>

	<div class="pageFooter" style="margin-bottom: 0px">
		<span id="serverStatusBar" title="Number of available workers"></span>
		<select style="display: none;" id="servers" name="servers" style="margin-top:0em">
			<option value="ws://localhost:8888/client/ws/speech|ws://localhost:8888/client/ws/status" selected="selected">Lucida</option>
		</select>

		<p style="clear: both;">

		<pre id="log"></pre>
	</div>
</div>

<script src="{{ url_for('static', filename='js/infer.js')}}"></script>
<script src="{{ url_for('static', filename='js/dictate.js')}}"></script>
<script src="{{ url_for('static', filename='js/recorder.js')}}"></script>
<script src="{{ url_for('static', filename='js/recorderWorker.js')}}"></script>
<script src="{{ url_for('static', filename='js/mob.js')}}"></script>
{% endblock %}
